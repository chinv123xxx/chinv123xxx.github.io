<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", Tahoma, sans-serif;
  background: #f4f6f8;
}

header {
  background: #1f2937;
  color: #fff;
  padding: 15px;
  text-align: center;
}

main {
  padding: 15px;
  max-width: 1000px;
  margin: auto;
}

section {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.flex {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

input, select {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  font-size: 16px;
}

button {
  border: none;
  border-radius: 10px;
  padding: 12px 16px;
  cursor: pointer;
  font-size: 16px;
}

.primary { background: #2563eb; color: #fff; }
.danger { background: #dc2626; color: #fff; }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  border-bottom: 1px solid #e5e7eb;
  padding: 8px;
  text-align: center;
}

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.4);
  display: none;
  justify-content: center;
  align-items: center;
}

.modal-box {
  background: #fff;
  padding: 20px;
  width: 90%;
  max-width: 420px;
  border-radius: 12px;
  text-align: center;
}

.hide-for-capture { display: none !important; }
.datetime { font-size: 14px; color: #555; margin-bottom: 10px; }

/* ====== ‚≠ê Responsive ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ====== */
@media (max-width: 768px) {

  header h1 {
    font-size: 20px;
  }

  section {
    padding: 15px;
  }

  .flex {
    flex-direction: column;
  }

  input, select, button {
    width: 100% !important;
  }

  table {
    font-size: 14px;
  }

  th, td {
    padding: 6px;
  }

  .modal-box {
    width: 95%;
  }
}
</style>
</head>

<body>

<header>
  <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>
  <p>‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
</header>

<main>
<section>
  <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>

  <div class="flex">
    <select id="product">
      <optgroup label="ü•© ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå">
        <option>‡∏´‡∏°‡∏π‡∏™‡πÑ‡∏•‡∏ã‡πå</option>
        <option>‡∏´‡∏°‡∏π‡∏´‡∏°‡∏±‡∏Å‡∏á‡∏≤</option>
        <option>‡∏´‡∏°‡∏π‡∏™‡∏≤‡∏°‡∏ä‡∏±‡πâ‡∏ô</option>
        <option>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏™‡πÑ‡∏•‡∏ã‡πå</option>
        <option>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏°‡∏±‡∏Å‡∏ô‡∏∏‡πà‡∏°</option>
        <option>‡πÑ‡∏Å‡πà‡∏´‡∏°‡∏±‡∏Å</option>
        <option>‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô</option>
        <option>‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å</option>
        <option>‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô</option>
      </optgroup>
      <optgroup label="ü¶ê ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•">
        <option>‡∏Å‡∏∏‡πâ‡∏á</option>
        <option>‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å</option>
        <option>‡∏´‡∏≠‡∏¢‡πÅ‡∏°‡∏•‡∏á‡∏†‡∏π‡πà</option>
        <option>‡∏´‡∏≠‡∏¢‡πÄ‡∏ä‡∏•‡∏•‡πå</option>
        <option>‡∏õ‡∏•‡∏≤</option>
        <option>‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà</option>
      </optgroup>
    </select>

    <input type="number" id="qty" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô">

    <select id="unit">
      <option>‡∏Å‡∏Å.</option>
      <option>‡∏Ç‡∏µ‡∏î</option>
      <option>‡πÅ‡∏û‡πá‡∏Ñ</option>
    </select>

    <input type="text" id="note" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)">
    <button class="primary" onclick="addOrder()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
        <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
        <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
        <th>‡∏•‡∏ö</th>
      </tr>
    </thead>
    <tbody id="orderList"></tbody>
  </table>

  <div class="flex">
    <button class="danger" onclick="clearAll()">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    <button class="primary" onclick="openSummary()">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</button>
  </div>
</section>
</main>

<div id="summaryModal" class="modal">
  <div class="modal-box" id="summaryBox">
    <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á</h3>
    <div class="datetime" id="dt"></div>

    <table>
      <thead>
        <tr>
          <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
          <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
        </tr>
      </thead>
      <tbody id="summaryList"></tbody>
    </table>

    <div class="flex capture-buttons">
      <button class="primary" onclick="saveImg()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ</button>
      <button class="danger" onclick="closeSummary()">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function saveData() {
  localStorage.setItem("orders", JSON.stringify(orders));
}

function addOrder() {
  const name = product.value;
  const qty = document.getElementById("qty").value;
  const unit = document.getElementById("unit").value;
  const note = document.getElementById("note").value;

  if (!qty || qty <= 0) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô");
    return;
  }

  orders.push({ name, qty: qty + " " + unit, note });
  qty.value = "";
  note.value = "";

  saveData();
  render();
}

function render() {
  orderList.innerHTML = "";
  orders.forEach((o,i)=>{
    orderList.innerHTML += `
    <tr>
      <td>${o.name}</td>
      <td>${o.qty}</td>
      <td>${o.note || "-"}</td>
      <td><button class="danger" onclick="removeItem(${i})">‚ùå</button></td>
    </tr>`;
  });
}

function removeItem(i){
  orders.splice(i,1);
  saveData();
  render();
}

function clearAll(){
  if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")){
    orders=[];
    saveData();
    render();
  }
}

function openSummary(){
  if(!orders.length) return alert("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
  summaryList.innerHTML="";
  orders.forEach(o=>{
    summaryList.innerHTML+=`
    <tr>
      <td>${o.name}</td>
      <td>${o.qty}</td>
      <td>${o.note || "-"}</td>
    </tr>`;
  });
  dt.innerText = "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà " + new Date().toLocaleString("th-TH");
  summaryModal.style.display="flex";
}

function closeSummary(){
  summaryModal.style.display="none";
}

function saveImg(){
  document.querySelector(".capture-buttons").classList.add("hide-for-capture");
  html2canvas(summaryBox).then(c=>{
    const a=document.createElement("a");
    a.href=c.toDataURL();
    a.download="order-summary.png";
    a.click();
    document.querySelector(".capture-buttons").classList.remove("hide-for-capture");
  });
}

render();
</script>

</body>
</html>
